#+TITLE: Microservicio Login - API
#+AUTHOR: fran
#+LANGUAGE: es
#+STARTUP: content indent showeverything
#+DESCRIPTION: API del microservicio Login
#+PROPERTY: header-args:verb :wrap src ob-verb-response
#+OPTIONS: results:nil

* API :verb:
template http://localhost:4567
Accept: application/json

*** TODO crear los roles del usuario.
** Registrarse
Crea un nuevo usuario en la bd.
#+begin_src verb
  post /registrar
  Content-Type: application/json; charset=utf-8

  {
      "usuario": "usuariotest",
      "email": "usuario@test.com",
      "nombre": "usuariotest",
      "contra": "usuariotest"
  }
#+end_src

#+RESULTS:
#+begin_src ob-verb-response
HTTP/1.1 200 OK
Content-Type: text/plain; charset=UTF-8
Date: Wed, 13 Aug 2025 06:38:29 GMT
Content-Length: 87

usuario5 $2a$15$a2.HbI9hOGPCviTNAR3YXOf8KQn8m0AxusYDfffCgqKGYctLXViYG usuario5@test.com
#+end_src

Get Usuario
#+begin_src verb 
get /usuario/1
#+end_src

#+RESULTS:
#+begin_src ob-verb-response
HTTP/1.1 200 OK
Content-Type: application/json
Date: Wed, 13 Aug 2025 07:37:14 GMT
Content-Length: 188

{
  "id": 1,
  "usuario": "fran",
  "email": "fran1@gmail.com",
  "nombre": null,
  "telefono": null,
  "direccion": null,
  "rol": "ADMIN",
  "permisos": "USUARIO_ALTA, USUARIO_BAJA, USUARIO_LISTAR, USUARIO_MODIFICAR"
}
#+end_src

Usuarios
#+begin_src verb 
get /usuario
#+end_src

#+RESULTS:
#+begin_src ob-verb-response
HTTP/1.1 200 OK
Content-Type: application/json
Date: Wed, 13 Aug 2025 07:37:10 GMT
Content-Length: 608

[
  {
    "id": 1,
    "usuario": "fran",
    "email": "fran1@gmail.com",
    "nombre": null,
    "telefono": null,
    "direccion": null,
    "rol": "ADMIN",
    "permisos": "USUARIO_ALTA, USUARIO_BAJA, USUARIO_LISTAR, USUARIO_MODIFICAR"
  },
  {
    "id": 2,
    "usuario": "fran2",
    "email": "fran2@gmail.com",
    "nombre": null,
    "telefono": null,
    "direccion": null,
    "rol": "EMPLEADO",
    "permisos": "USUARIO_LISTAR"
  },
  {
    "id": 3,
    "usuario": "fran3",
    "email": "fran3@gmail.com",
    "nombre": null,
    "telefono": null,
    "direccion": null,
    "rol": "USUARIO",
    "permisos": null
  },
  {
    "id": 4,
    "usuario": "usuario5",
    "email": "usuario5@test.com",
    "nombre": "usuariotest",
    "telefono": null,
    "direccion": null,
    "rol": null,
    "permisos": null
  }
]
#+end_src

